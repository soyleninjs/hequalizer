const HequalizerUtils={mergeDeepObject(...e){let t=e=>e&&"object"==typeof e;return e.reduce((e,s)=>(Object.keys(s).forEach(i=>{let a=e[i],l=s[i];Array.isArray(a)&&Array.isArray(l)?e[i]=[...new Set([...l,...a])]:t(a)&&t(l)?e[i]=HequalizerUtils.mergeDeepObject(a,l):e[i]=l}),e),{})},uniqueID(){let e=Math.random().toString(36).substr(2),t=Date.now().toString(36);return t+e},returnArrayData:e=>Array.isArray(e)?e:[e],cssVariable(e,t,s=null){let i=HequalizerUtils.returnArrayData(e);i&&0!==i.length&&i.forEach((e,i)=>{if(null===s){e.style.removeProperty(t);return}e.style.setProperty(t,s)})},classElements(e,t,s){let i=HequalizerUtils.returnArrayData(s),a=HequalizerUtils.returnArrayData(e);a&&0!==a.length&&a.forEach(e=>{"add"===t&&e.classList.add(...i),"remove"===t&&e.classList.remove(...i)})}};function Hequalizer(e,t={}){let s,i,a={},l=[],r=!1,n={zero:"height-zero",calculating:"height-calculating",complete:"height-calculated"},c={cssVariable:"--height",columns:"all",initialIndex:0,resizeObserver:!0,classElementToOmit:"",on:{init({rows:e,instance:t}){},afterResize({rows:e,instance:t}){},afterChanges({rows:e,instance:t}){},afterUpdate({rows:e,instance:t}){},afterDestroy({rows:e,instance:t}){}},responsive:{}};this.id=HequalizerUtils.uniqueID(),this.elementsArray=e,this.values=0,this.responsive=t.responsive||{};let o=null,u=Object.keys(this.responsive).sort((e,t)=>e-t).map(e=>Number(e)),h=t=>{s=t,i=[...e].filter((e,t)=>s.initialIndex>0?t>=s.initialIndex&&e:e)},d=()=>{a.default=HequalizerUtils.mergeDeepObject(c,t),u.forEach(e=>{a[e]=HequalizerUtils.mergeDeepObject(c,t,this.responsive[e])})},z=()=>{let e=u.find(e=>window.innerWidth<=e);o!==e&&(void 0===e?(h(a.default),this.actualBreakpoint="default"):(h(a[e]),this.actualBreakpoint=e),o=e,this.actualOptions=s)},m=(e,t=null)=>{"init"===e&&s.on.init({rows:t,instance:this}),"resize"===e&&s.on.afterResize({rows:t,instance:this}),"changes"===e&&s.on.afterChanges({rows:t,instance:this}),"update"===e&&s.on.afterUpdate({rows:t,instance:this}),"destroy"===e&&s.on.afterDestroy({rows:t,instance:this})},f=e=>{let t=0;if(!s.resizeObserver){if(r)return;HequalizerUtils.cssVariable([...i],s.cssVariable),HequalizerUtils.classElements([...i],"remove",[n.zero,n.complete]),this.values=t,r=!0;return}if(r=!1,"all"==s.columns){t=0;let a=[...i];HequalizerUtils.cssVariable(a,s.cssVariable),HequalizerUtils.classElements(a,"remove",[n.zero,n.calculating,n.complete]),HequalizerUtils.classElements(a,"add",n.calculating),a.forEach((e,i)=>{let a=e.classList.contains(s.classElementToOmit);e.offsetHeight>t&&!a&&(t=e.offsetHeight)}),HequalizerUtils.cssVariable(a,s.cssVariable,`${t}px`),HequalizerUtils.classElements(a,"remove",n.calculating),t>0?HequalizerUtils.classElements(a,"add",n.complete):HequalizerUtils.classElements(a,"add",n.zero),this.values=t,m(e,t)}else{let l=[],c=[],o=[...i],u=o.length;for(;0!==u;){let h=o.splice(0,s.columns);l.push(h),u=o.length}l.forEach(e=>{t=0,HequalizerUtils.cssVariable(e,s.cssVariable),HequalizerUtils.classElements(e,"remove",[n.zero,n.calculating,n.complete]),HequalizerUtils.classElements(e,"add",n.calculating),e.forEach((e,i)=>{let a=e.classList.contains(s.classElementToOmit);e.offsetHeight>t&&!a&&(t=e.offsetHeight)}),HequalizerUtils.cssVariable(e,s.cssVariable,`${t}px`),HequalizerUtils.classElements(e,"remove",n.calculating),t>0?HequalizerUtils.classElements(e,"add",n.complete):HequalizerUtils.classElements(e,"add",n.zero),c.push(t)}),this.values=c,m(e,c)}},p=()=>{[...i].forEach((e,t)=>{e.style.removeProperty(s.cssVariable)})},H=()=>{z(),f("resize")},q=()=>{f("changes")},v=()=>{[...i].forEach(e=>{let t=new window.MutationObserver(q);l.push(t)})},g=()=>{window.addEventListener("resize",H)},E=()=>{window.removeEventListener("resize",H)},U=()=>{v(),[...i].forEach((e,t)=>{l[t].observe(e,{childList:!0,subtree:!0,characterData:!0})})},b=()=>{[...i].forEach((e,t)=>{l[t].disconnect()}),l=[]};return this.update=()=>{f("update")},this.init=()=>{d(),z(),f("init"),g(),U()},this.destroy=(e=!1)=>{p(),E(),b(),this.values=0,e&&window.HequalizerAPI.removeInstance(this.id),m("destroy")},document.addEventListener("DOMContentLoaded",()=>{window.setTimeout(()=>{this.init()},100)}),window.HequalizerAPI.Instances.push(this),this}window.HequalizerAPI=window.HequalizerAPI||{Init:Hequalizer,Instances:[],removeInstance(e){let t=window.HequalizerAPI.Instances.filter(t=>t.id!==e);window.HequalizerAPI.Instances=t}},"undefined"!=typeof module&&void 0!==module.exports&&(module.exports=Hequalizer);